<!DOCTYPE html>
<html lang="zh-CN" data-theme="macos">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Monitor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@400;500;600;700&family=SF+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'ios': {
                            'bg': 'rgb(var(--c-bg) / <alpha-value>)',
                            'surface': 'rgb(var(--c-surface) / <alpha-value>)',
                            'elevated': 'rgb(var(--c-elevated) / <alpha-value>)',
                            // separator é€šå¸¸ä¸éœ€è¦ /xx ä¿®é¥°ï¼Œå†…ç½®é»˜è®¤é€æ˜åº¦å³å¯
                            'separator': 'rgb(var(--c-separator) / var(--a-separator))',
                        },
                        'glass': {
                            'bg': 'rgb(var(--c-glass-bg) / var(--a-glass-bg))',
                            'border': 'rgb(var(--c-glass-border) / var(--a-glass-border))',
                            'hover': 'rgb(var(--c-glass-hover) / var(--a-glass-hover))',
                        },
                        'accent': 'rgb(var(--c-accent) / <alpha-value>)',
                        'profit': 'rgb(var(--c-profit) / <alpha-value>)',
                        'loss': 'rgb(var(--c-loss) / <alpha-value>)',
                        'warning': 'rgb(var(--c-warning) / <alpha-value>)',
                        'funding': 'rgb(var(--c-funding) / <alpha-value>)',
                        'transfer': 'rgb(var(--c-transfer) / <alpha-value>)',
                        'text': {
                            'primary': 'rgb(var(--c-text-primary) / <alpha-value>)',
                            'secondary': 'rgb(var(--c-text-secondary) / <alpha-value>)',
                            // ä¸‰çº§æ–‡å­—é€šå¸¸å›ºå®šè¾ƒä½ alphaï¼Œæ›´æ¥è¿‘ç³»ç»Ÿå±‚çº§
                            'tertiary': 'rgb(var(--c-text-tertiary) / 0.60)',
                            'muted': 'rgb(var(--c-text-muted) / <alpha-value>)',
                        }
                    },
                    fontFamily: {
                        'sans': ['-apple-system', 'BlinkMacSystemFont', 'SF Pro Display', 'Helvetica Neue', 'Arial', 'sans-serif'],
                        'mono': ['SF Mono', 'Monaco', 'Menlo', 'monospace'],
                    },
                }
            }
        }
    </script>
    <script>
        // ä¸»é¢˜é¢„åŠ è½½ï¼šé¿å…åˆ·æ–°æ—¶é—ªä¸€ä¸‹é»˜è®¤ä¸»é¢˜ï¼ˆFOUCï¼‰
        (function () {
            try {
                const key = 'pm-theme';
                const saved = localStorage.getItem(key);
                if (saved === 'macos' || saved === 'ios') {
                    document.documentElement.dataset.theme = saved;
                } else {
                    document.documentElement.dataset.theme = 'ios';
                }
            } catch (_) {
                // ignore
            }
        })();
    </script>
    <style>
        :root { color-scheme: light dark; }

        /* ========= VisionOS / macOS 26 Design System ========= */
        
        html[data-theme="macos"] {
            /* Dark Mode - Deep Space (ä¼˜åŒ–ï¼šè‰²è°ƒç»Ÿä¸€) */
            --c-bg-grad-start: 10 10 12;   /* æ›´æ·± */
            --c-bg-grad-end: 18 18 24;     /* åå†· */
            
            --c-surface: 30 30 35;
            --c-elevated: 45 45 50;
            --c-separator: 255 255 255;
            --a-separator: 0.10;

            /* Vision Pro Colors */
            --c-accent: 10 132 255;
            --c-profit: 48 209 88;
            --c-loss: 255 69 58;
            --c-warning: 255 214 10;   
            --c-funding: 175 82 222;
            --c-transfer: 100 210 255; 

            /* Text */
            --c-text-primary: 255 255 255;
            --c-text-secondary: 235 235 245;
            --c-text-tertiary: 160 160 170;
            --c-text-muted: 120 120 130;

            /* Glass Materials (Dark - ä¼˜åŒ–ï¼šæ›´é»‘æ›´é€ï¼Œèå…¥èƒŒæ™¯) */
            --glass-base-bg: 20 20 25;     /* ä¾§è¾¹æ æ›´æ·± */
            --glass-base-alpha: 0.40;
            --glass-border-alpha: 0.12;
            --glass-blur: 50px;
            
            --glass-card-bg: 25 25 32;     /* å¡ç‰‡ä¸å†æ˜¯çº¯ç°ï¼Œå¸¦ä¸€ç‚¹è“é»‘ */
            --glass-card-alpha: 0.30;      /* æ›´é€ (0.4 -> 0.3) */
            --glass-card-border-alpha: 0.15;
            
            --glass-hover-bg: 255 255 255;
            --glass-hover-alpha: 0.05;
            
            /* Shadows */
            --shadow-card: 0 8px 32px rgba(0, 0, 0, 0.3); /* é˜´å½±åŠ æ·±ï¼Œå¢å¼ºå±‚æ¬¡ */
            
            /* Glows */
            --glow-1: 10 132 255;
            --glow-2: 94 92 230;
            --glow-3: 255 45 85;
            --glow-opacity: 0.20;          /* ç¨å¾®é™ä½å…‰æ–‘äº®åº¦ */
            
            /* Tailwind Compat */
            --c-bg: 10 10 12;
            --c-glass-hover: 255 255 255;
            --a-glass-hover: 0.05;
            --c-glass-bg: 25 25 32;
            --a-glass-bg: 0.30;
            
            /* Legacy Compat */
            --mat-a-bg: 20 20 25;
            --mat-a-alpha: 0.40;
            --mat-a-blur: 50px;
            --mat-b-bg: 25 25 32;
            --mat-b-alpha: 0.30;
            
            /* Modal */
            --modal-bg: 25 25 30;
            --modal-alpha: 0.85;
            --modal-blur: 50px;
            --modal-sat: 180%;
            --modal-border-alpha: 0.15;
            --modal-shadow: 0 40px 120px rgba(0,0,0,0.6);
            --modal-overlay-alpha: 0.7;
            
            /* Misc */
            --hover-lift: -2px;
            --noise-opacity: 0.03;
        }

        html[data-theme="ios"] {
            /* Light Mode - ä¼˜åŒ–ï¼šæŸ”å’ŒæŠ¤çœ¼ */
            --c-bg-grad-start: 235 235 240; /* é™ä½äº®åº¦ (F2 -> EB) */
            --c-bg-grad-end: 245 245 250;
            
            --c-surface: 255 255 255;
            --c-elevated: 255 255 255;
            --c-separator: 20 20 30;       /* æ·±è‰²åˆ†éš”çº¿æ›´æ¸…æ™° */
            --a-separator: 0.06;

            /* Vivid Colors */
            --c-accent: 0 110 255;         /* ç¨å¾®åŠ æ·±è“è‰²ï¼Œæé«˜å¯è¯»æ€§ */
            --c-profit: 40 180 70;         /* ç¨å¾®åŠ æ·±ç»¿è‰² */
            --c-loss: 255 59 48;
            --c-warning: 255 149 0;
            --c-funding: 175 82 222;
            --c-transfer: 88 86 214;

            /* Text */
            --c-text-primary: 0 0 0;
            --c-text-secondary: 60 60 67;
            --c-text-tertiary: 100 100 110;
            --c-text-muted: 130 130 135;

            /* Glass Materials (Light - ä¼˜åŒ–ï¼šå‡å°‘åˆºçœ¼ç™½å…‰) */
            --glass-base-bg: 245 245 250;  /* ä¾§è¾¹æ å¾®ç° */
            --glass-base-alpha: 0.60;
            --glass-border-alpha: 0.08;
            --glass-blur: 50px;
            
            --glass-card-bg: 255 255 255;
            --glass-card-alpha: 0.45;      /* é™ä½ä¸é€æ˜åº¦ (0.55 -> 0.45) */
            --glass-card-border-alpha: 0.4;
            
            --glass-hover-bg: 255 255 255;
            --glass-hover-alpha: 0.3;
            
            /* Shadows */
            --shadow-card: 0 4px 20px rgba(0, 0, 0, 0.04); /* æ›´æŸ”å’Œçš„é˜´å½± */

            /* Glows */
            --glow-1: 0 122 255;
            --glow-2: 52 199 89;
            --glow-3: 255 149 0;
            --glow-opacity: 0.08;          /* å¤§å¹…é™ä½å…‰æ–‘ä¸é€æ˜åº¦ (0.15 -> 0.08) */
            
            /* Tailwind Compat */
            --c-bg: 235 235 240;
            --c-glass-hover: 255 255 255;
            --a-glass-hover: 0.3;
            --c-glass-bg: 255 255 255;
            --a-glass-bg: 0.45;
            
            /* Legacy Compat */
            --mat-a-bg: 245 245 250;
            --mat-a-alpha: 0.60;
            --mat-a-blur: 50px;
            --mat-b-bg: 255 255 255;
            --mat-b-alpha: 0.45;

            /* Modal */
            --modal-bg: 250 250 255;
            --modal-alpha: 0.92;
            --modal-blur: 40px;
            --modal-sat: 180%;
            --modal-border-alpha: 0.2;
            --modal-shadow: 0 20px 60px rgba(0,0,0,0.15);
            --modal-overlay-alpha: 0.2;
            
            /* Misc */
            --hover-lift: -2px;
            --noise-opacity: 0.015;
        }

        body {
            background: radial-gradient(at top left, rgb(var(--c-bg-grad-start)), transparent),
                        linear-gradient(to bottom right, rgb(var(--c-bg-grad-start)), rgb(var(--c-bg-grad-end)));
            min-height: 100vh;
            color: rgb(var(--c-text-primary) / 1);
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }

        /* ========= Background Glows ========= */
        .bg-glow {
            position: fixed;
            border-radius: 50%;
            filter: blur(100px);
            opacity: var(--glow-opacity);
            z-index: 0;
            pointer-events: none;
            mix-blend-mode: screen;
        }

        .bg-glow-1 {
            top: -10%;
            left: -10%;
            width: 70vw;
            height: 70vw;
            background: rgb(var(--glow-1));
            animation: float 20s ease-in-out infinite;
        }

        .bg-glow-2 {
            bottom: -10%;
            right: -10%;
            width: 60vw;
            height: 60vw;
            background: rgb(var(--glow-2));
            animation: float 25s ease-in-out infinite reverse;
        }

        .bg-glow-3 {
            top: 40%;
            left: 40%;
            width: 40vw;
            height: 40vw;
            background: rgb(var(--glow-3));
            animation: float 30s ease-in-out infinite 5s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
        }

        /* ========= Glass Materials ========= */
        .glass,
        .glass-light,
        .modal-content {
            position: relative;
            isolation: isolate;
        }

        /* Noise Texture */
        .glass::before,
        .glass-light::before,
        .modal-content::before {
            content: '';
            position: absolute;
            inset: 0;
            pointer-events: none;
            border-radius: inherit;
            z-index: -1;
            opacity: var(--noise-opacity);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='3' stitchTiles='stitch' result='t'/%3E%3CfeColorMatrix in='t' type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='.25'/%3E%3C/svg%3E");
            background-repeat: repeat;
            background-size: 180px 180px;
        }

        /* Sidebar / Navbar */
        .glass {
            background: rgb(var(--glass-base-bg) / var(--glass-base-alpha));
            backdrop-filter: blur(var(--glass-blur)) saturate(180%);
            -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(180%);
            border-right: 1px solid rgb(var(--c-separator) / var(--glass-border-alpha));
            border-bottom: 1px solid rgb(var(--c-separator) / var(--glass-border-alpha));
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.05);
        }

        /* Content Cards */
        .glass-light {
            background: rgb(var(--glass-card-bg) / var(--glass-card-alpha));
            backdrop-filter: blur(30px) saturate(150%);
            -webkit-backdrop-filter: blur(30px) saturate(150%);
            
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-top: 1px solid rgba(255, 255, 255, 0.5);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            
            box-shadow: var(--shadow-card);
            border-radius: 24px;
        }
        
        html[data-theme="macos"] .glass-light {
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-top: 1px solid rgba(255, 255, 255, 0.18);
        }

        .glass-hover {
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .glass-hover:hover {
            transform: translateY(var(--hover-lift)) scale(1.005);
            background: rgb(var(--glass-hover-bg) / var(--glass-hover-alpha));
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
            border-color: rgba(255, 255, 255, 0.6);
            z-index: 1;
        }

        /* Buttons (iOS Style) */
        .btn-ios {
            background: rgb(var(--c-accent) / 1);
            color: white;
            border-radius: 100px;
            box-shadow: 0 4px 12px rgb(var(--c-accent) / 0.4);
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .btn-ios:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 16px rgb(var(--c-accent) / 0.5);
            filter: brightness(1.1);
        }

        .btn-ios:active {
            transform: scale(0.96);
        }

        /* Tabs */
        .tab-btn {
            border-radius: 12px;
            color: rgb(var(--c-text-muted) / 1);
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            background: rgba(var(--c-text-primary), 0.05);
            color: rgb(var(--c-text-primary) / 1);
        }

        .tab-active {
            background: rgb(var(--c-surface) / 0.8) !important;
            color: rgb(var(--c-text-primary) / 1) !important;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            backdrop-filter: blur(10px);
            font-weight: 600;
        }
        
        html[data-theme="macos"] .tab-active {
            background: rgba(255,255,255,0.15) !important;
        }

        /* Separator */
        .ios-separator {
            border-color: rgb(var(--c-separator) / var(--a-separator)) !important;
        }
        
        /* Account Button Active State */
        .account-btn.bg-accent {
            background: rgb(var(--c-accent) / 1) !important;
            color: white !important;
            box-shadow: 0 4px 12px rgb(var(--c-accent) / 0.3);
        }

        /* Pulse */
        .pulse-dot { animation: pulse-ios 2s ease-in-out infinite; }
        @keyframes pulse-ios {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(0.9); }
        }

        /* Fade In */
        .fade-in { animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) backwards; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { 
            background: rgb(var(--c-text-muted) / 0.3); 
            border-radius: 4px; 
            border: 2px solid transparent; 
            background-clip: content-box; 
        }
        ::-webkit-scrollbar-thumb:hover { background: rgb(var(--c-text-muted) / 0.6); border: 2px solid transparent; background-clip: content-box;}

        /* Input Controls */
        input, select {
            color-scheme: light dark;
        }

        /* Utilities */
        .text-profit { color: rgb(var(--c-profit) / 1) !important; }
        .text-loss { color: rgb(var(--c-loss) / 1) !important; }
        .text-accent { color: rgb(var(--c-accent) / 1) !important; }

        .table-row-hover { transition: background-color 0.15s ease; }
        .table-row-hover:hover { background: rgb(var(--c-text-primary) / 0.03); }
        .table-row-hover:nth-child(odd) { background: rgb(var(--c-text-primary) / 0.01); }

        .profit-highlight { background: rgb(var(--c-profit) / 0.08) !important; }
        .loss-highlight { background: rgb(var(--c-loss) / 0.08) !important; }

        .animate-bounce-slow { animation: bounce-slow 3s ease-in-out infinite; }
        @keyframes bounce-slow {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .glow-profit { text-shadow: 0 0 20px rgb(var(--c-profit) / 0.30); }
        .glow-loss { text-shadow: 0 0 20px rgb(var(--c-loss) / 0.30); }

        .detail-btn { opacity: 0; transition: opacity 0.15s ease; }
        .position-card:hover .detail-btn,
        .asset-card:hover .detail-btn,
        .table-row-hover:hover .detail-btn { opacity: 1; }

        /* Modal */
        .modal-overlay {
            position: fixed; inset: 0;
            background: rgb(0 0 0 / var(--modal-overlay-alpha));
            backdrop-filter: blur(10px);
            z-index: 100;
            opacity: 0; visibility: hidden;
            transition: all 0.3s ease;
        }
        .modal-overlay.active { opacity: 1; visibility: visible; }

        .modal-container {
            position: fixed; top: 50%; left: 50%;
            transform: translate(-50%, -48%) scale(0.96);
            z-index: 101;
            width: 90%; max-width: 560px; max-height: 85vh;
            opacity: 0; visibility: hidden;
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .modal-container.active {
            opacity: 1; visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .modal-content {
            background: rgb(var(--modal-bg) / var(--modal-alpha));
            backdrop-filter: blur(var(--modal-blur)) saturate(var(--modal-sat));
            border: 1px solid rgb(255 255 255 / var(--modal-border-alpha));
            box-shadow: var(--modal-shadow);
            border-radius: 24px;
            overflow: hidden;
        }

        .modal-header {
            padding: 20px 24px;
            border-bottom: 1px solid rgb(var(--c-separator) / var(--a-separator));
            display: flex; align-items: center; justify-content: space-between;
        }

        .modal-body {
            padding: 24px;
            max-height: calc(85vh - 80px);
            overflow-y: auto;
        }

        .modal-close {
            width: 32px; height: 32px;
            border-radius: 50%;
            background: rgba(120, 120, 128, 0.12);
            display: flex; align-items: center; justify-content: center;
            transition: background 0.15s ease;
            cursor: pointer;
            color: rgb(var(--c-text-secondary) / 1);
        }
        .modal-close:hover { background: rgba(120, 120, 128, 0.24); color: rgb(var(--c-text-primary) / 1); }

        /* Fields */
        .field-group { margin-bottom: 24px; }
        .field-group:last-child { margin-bottom: 0; }
        .field-group-title {
            font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.8px;
            color: rgb(var(--c-text-muted) / 1);
            margin-bottom: 12px; padding-bottom: 8px;
            border-bottom: 1px solid rgb(var(--c-separator) / 0.1);
        }
        .field-row { display: flex; justify-content: space-between; align-items: center; padding: 6px 0; }
        .field-key { font-size: 13px; color: rgb(var(--c-text-secondary) / 1); }
        .field-value { font-size: 13px; font-family: 'SF Mono', Monaco, monospace; font-weight: 500; color: rgb(var(--c-text-primary) / 1); }
        .field-value.muted { color: rgb(var(--c-text-muted) / 1); }

        /* Specific Overrides */
        #theme-toggle {
            background: rgba(0,0,0,0.05);
            border: 1px solid rgba(255,255,255,0.2);
        }
        html[data-theme="macos"] #theme-toggle {
            background: rgba(255,255,255,0.1);
        }
        .theme-toggle-btn {
            padding: 6px 10px; border-radius: 8px; font-size: 12px; font-weight: 600;
            color: rgb(var(--c-text-muted) / 1); transition: all 0.2s ease;
        }
        html[data-theme="macos"] .theme-toggle-btn[data-theme-value="macos"],
        html[data-theme="ios"] .theme-toggle-btn[data-theme-value="ios"] {
            background: rgb(255 255 255 / 1);
            color: black;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
        html[data-theme="macos"] .theme-toggle-btn[data-theme-value="macos"] {
            background: rgb(60 60 65 / 1);
            color: white;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .toolbar-chip {
            background: transparent;
            border: 1px solid rgb(var(--c-separator) / 0.2);
            border-radius: 12px;
        }

        @media (prefers-reduced-motion: reduce) {
            *, ::before, ::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }
    </style>
</head>
<body class="font-sans text-text-primary">
    <!-- èƒŒæ™¯å…‰æ™• -->
    <div class="bg-glow bg-glow-1"></div>
    <div class="bg-glow bg-glow-2"></div>
    <div class="bg-glow bg-glow-3"></div>

    <div id="app" class="relative z-10 flex h-screen">
        <!-- ä¾§è¾¹æ  -->
        <aside class="w-72 glass flex flex-col">
            <!-- Logo -->
            <div class="p-6 border-b ios-separator">
                <h1 class="text-xl font-semibold text-text-primary">Portfolio Monitor</h1>
                <p class="text-xs text-text-muted mt-2 flex items-center gap-2">
                    <span class="w-1.5 h-1.5 rounded-full bg-accent"></span>
                    å¤šè´¦æˆ·å®æ—¶ç›‘æ§
                </p>
            </div>

            <!-- è¿æ¥çŠ¶æ€ -->
            <div class="px-6 py-4 border-b ios-separator flex items-center gap-3">
                <span id="ws-status" class="w-2 h-2 rounded-full bg-loss pulse-dot"></span>
                <span id="ws-status-text" class="text-sm text-text-muted">è¿æ¥ä¸­...</span>
            </div>

            <!-- æ±‡æ€»ä¿¡æ¯ -->
            <div class="p-6 border-b ios-separator">
                <div class="text-xs text-text-muted uppercase tracking-wide mb-2">æ€»èµ„äº§ (USDT)</div>
                <div id="total-equity" class="text-3xl font-semibold text-text-primary font-mono">--</div>
                <div class="flex items-center gap-3 mt-4">
                    <span class="text-xs text-text-muted">æœªå®ç°ç›ˆäº</span>
                    <span id="total-pnl" class="text-sm font-mono font-medium">--</span>
                </div>
            </div>

            <!-- è´¦æˆ·åˆ—è¡¨ -->
            <div class="flex-1 overflow-y-auto p-4">
                <div class="text-xs text-text-muted uppercase tracking-wide px-3 py-2 mb-2">è´¦æˆ·åˆ—è¡¨</div>
                <div id="account-list" class="space-y-1">
                    <!-- åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>

            <!-- åˆ·æ–°æŒ‰é’® -->
            <div class="p-4 border-t ios-separator">
                <button onclick="refreshData()" class="w-full py-3 px-4 btn-ios rounded-xl text-sm font-medium text-white">
                    åˆ·æ–°æ•°æ®
                </button>
            </div>
        </aside>

        <!-- ä¸»å†…å®¹åŒº -->
        <main class="flex-1 overflow-hidden flex flex-col">
            <!-- é¡¶éƒ¨æ ‡ç­¾æ  -->
            <div class="glass border-b ios-separator px-6 py-4 flex items-center gap-2">
                <button onclick="switchTab('positions')" id="tab-positions" class="tab-btn px-5 py-2 rounded-lg text-sm font-medium tab-active transition-all">
                    ä»“ä½
                </button>
                <button onclick="switchTab('assets')" id="tab-assets" class="tab-btn px-5 py-2 rounded-lg text-sm font-medium text-text-muted hover:text-text-primary hover:bg-glass-hover transition-all">
                    èµ„äº§
                </button>
                <button onclick="switchTab('pending-orders')" id="tab-pending-orders" class="tab-btn px-5 py-2 rounded-lg text-sm font-medium text-text-muted hover:text-text-primary hover:bg-glass-hover transition-all">
                    åœ¨é€”è®¢å•
                </button>
                <button onclick="switchTab('orders')" id="tab-orders" class="tab-btn px-5 py-2 rounded-lg text-sm font-medium text-text-muted hover:text-text-primary hover:bg-glass-hover transition-all">
                    å†å²è®¢å•
                </button>
                <button onclick="switchTab('bills')" id="tab-bills" class="tab-btn px-5 py-2 rounded-lg text-sm font-medium text-text-muted hover:text-text-primary hover:bg-glass-hover transition-all">
                    è´¦å•æµæ°´
                </button>
                <button onclick="switchTab('position-history')" id="tab-position-history" class="tab-btn px-5 py-2 rounded-lg text-sm font-medium text-text-muted hover:text-text-primary hover:bg-glass-hover transition-all">
                    å†å²ä»“ä½
                </button>
                <button onclick="switchTab('equity-curve')" id="tab-equity-curve" class="tab-btn px-5 py-2 rounded-lg text-sm font-medium text-text-muted hover:text-text-primary hover:bg-glass-hover transition-all">
                    èµ„äº§æ›²çº¿
                </button>
                <div class="flex-1"></div>
                <div id="theme-toggle" class="toolbar-chip rounded-lg p-0.5 flex items-center mr-2" role="group" aria-label="Theme">
                    <button type="button" class="theme-toggle-btn" data-theme-value="macos" aria-pressed="true">macOS</button>
                    <button type="button" class="theme-toggle-btn" data-theme-value="ios" aria-pressed="false">iOS</button>
                </div>
                <span id="current-account-name" class="text-sm text-text-muted px-4 py-2 toolbar-chip rounded-lg">å…¨éƒ¨è´¦æˆ·</span>
            </div>

            <!-- å†…å®¹åŒºåŸŸ -->
            <div class="flex-1 overflow-auto p-6">
                <!-- ä»“ä½è§†å›¾ -->
                <div id="view-positions" class="space-y-5">
                    <!-- è´¦æˆ·èµ„äº§å¡ç‰‡ -->
                    <div id="balance-card" class="glass-light rounded-2xl p-6 glass-hover fade-in">
                        <h3 class="text-xs text-text-muted uppercase tracking-wide mb-5">è´¦æˆ·èµ„äº§</h3>
                        <div class="grid grid-cols-4 gap-6">
                            <div class="relative">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-base">ğŸ’</span>
                                    <span class="text-xs text-text-muted">æ€»æƒç›Š</span>
                                </div>
                                <div id="account-equity" class="text-2xl font-mono font-semibold text-text-primary">--</div>
                            </div>
                            <div class="relative">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-base">ğŸ’µ</span>
                                    <span class="text-xs text-text-muted">å¯ç”¨ä½™é¢</span>
                                </div>
                                <div id="account-available" class="text-2xl font-mono font-medium text-profit">--</div>
                            </div>
                            <div class="relative">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-base">ğŸ”’</span>
                                    <span class="text-xs text-text-muted">å·²ç”¨ä¿è¯é‡‘</span>
                                </div>
                                <div id="account-margin" class="text-2xl font-mono font-medium text-text-secondary">--</div>
                                <!-- ä¿è¯é‡‘ä½¿ç”¨ç‡ -->
                                <div class="mt-2">
                                    <div class="h-1.5 bg-ios-elevated rounded-full overflow-hidden">
                                        <div id="margin-ratio-bar" class="h-full bg-accent rounded-full transition-all" style="width: 0%"></div>
                                    </div>
                                    <div id="margin-ratio-text" class="text-xs text-text-muted mt-1 font-mono">0%</div>
                                </div>
                            </div>
                            <div class="relative">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-base">ğŸ“Š</span>
                                    <span class="text-xs text-text-muted">æœªå®ç°ç›ˆäº</span>
                                </div>
                                <div id="account-pnl" class="text-2xl font-mono font-semibold">--</div>
                            </div>
                        </div>
                    </div>

                    <!-- ä»“ä½å¡ç‰‡ -->
                    <div class="glass-light rounded-2xl overflow-hidden fade-in">
                        <div class="px-6 py-4 border-b ios-separator flex items-center justify-between">
                            <h3 class="text-xs text-text-muted uppercase tracking-wide">åˆçº¦ä»“ä½</h3>
                            <span id="position-count" class="text-xs text-text-muted px-3 py-1 bg-ios-elevated rounded-full">0 ä¸ªä»“ä½</span>
                        </div>
                        <div id="positions-container" class="p-4 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
                            <!-- åŠ¨æ€ç”Ÿæˆå¡ç‰‡ -->
                        </div>
                        <div id="no-positions" class="hidden px-6 py-16 text-center text-text-muted text-sm">
                            <div class="text-5xl mb-4 opacity-40 animate-pulse">ğŸ“­</div>
                            <div class="text-base mb-1">æš‚æ— æŒä»“</div>
                            <div class="text-xs text-text-muted/60">å½“å‰æ²¡æœ‰æ´»è·ƒçš„åˆçº¦ä»“ä½</div>
                        </div>
                    </div>
                </div>

                <!-- èµ„äº§è§†å›¾ -->
                <div id="view-assets" class="hidden space-y-5">
                    <!-- èµ„äº§å¡ç‰‡ -->
                    <div class="glass-light rounded-2xl overflow-hidden fade-in">
                        <div class="px-6 py-4 border-b ios-separator flex items-center justify-between">
                            <h3 class="text-xs text-text-muted uppercase tracking-wide">å¸ç§èµ„äº§</h3>
                            <span id="asset-count" class="text-xs text-text-muted px-3 py-1 bg-ios-elevated rounded-full">0 ä¸ªå¸ç§</span>
                        </div>
                        <div id="assets-container" class="p-4 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
                            <!-- åŠ¨æ€ç”Ÿæˆå¡ç‰‡ -->
                        </div>
                        <div id="no-assets" class="hidden px-6 py-16 text-center text-text-muted text-sm">
                            <div class="text-5xl mb-4 opacity-40 animate-bounce-slow">ğŸ’°</div>
                            <div class="text-base mb-1">æš‚æ— èµ„äº§</div>
                            <div class="text-xs text-text-muted/60">èµ„äº§æ•°æ®å°†åœ¨è¿æ¥åæ˜¾ç¤º</div>
                        </div>
                    </div>
                </div>

                <!-- åœ¨é€”è®¢å•è§†å›¾ -->
                <div id="view-pending-orders" class="hidden space-y-5">
                    <!-- åœ¨é€”è®¢å•è¡¨æ ¼ -->
                    <div class="glass-light rounded-2xl overflow-hidden fade-in">
                        <div class="px-6 py-4 border-b ios-separator flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <h3 class="text-xs text-text-muted uppercase tracking-wide">åœ¨é€”è®¢å•</h3>
                                <span id="pending-order-count" class="text-xs text-text-muted px-3 py-1 bg-ios-elevated rounded-full">0 ä¸ªæŒ‚å•</span>
                            </div>
                            <button onclick="loadPendingOrders()" class="px-4 py-1.5 bg-ios-elevated hover:bg-ios-surface rounded-lg text-xs font-medium transition-all flex items-center gap-2">
                                <span>åˆ·æ–°</span>
                            </button>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="text-xs text-text-muted">
                                    <tr class="border-b ios-separator">
                                        <th class="text-left px-6 py-3.5 font-medium">æ—¶é—´</th>
                                        <th class="text-left px-6 py-3.5 font-medium">åˆçº¦</th>
                                        <th class="text-left px-6 py-3.5 font-medium">å¼€å¹³</th>
                                        <th class="text-left px-6 py-3.5 font-medium">ç±»å‹</th>
                                        <th class="text-right px-6 py-3.5 font-medium">å§”æ‰˜ä»·</th>
                                        <th class="text-right px-6 py-3.5 font-medium">å§”æ‰˜é‡</th>
                                        <th class="text-right px-6 py-3.5 font-medium">å·²æˆäº¤</th>
                                        <th class="text-right px-6 py-3.5 font-medium">æˆäº¤å‡ä»·</th>
                                        <th class="text-left px-6 py-3.5 font-medium">çŠ¶æ€</th>
                                    </tr>
                                </thead>
                                <tbody id="pending-orders-table">
                                    <!-- åŠ¨æ€ç”Ÿæˆ -->
                                </tbody>
                            </table>
                        </div>
                        <div id="no-pending-orders" class="hidden px-6 py-16 text-center text-text-muted text-sm">
                            <div class="text-5xl mb-4 opacity-40">âœ¨</div>
                            <div class="text-base mb-1">æš‚æ— åœ¨é€”è®¢å•</div>
                            <div class="text-xs text-text-muted/60">æ‰€æœ‰è®¢å•å·²æˆäº¤æˆ–å–æ¶ˆ</div>
                        </div>
                        <div id="pending-orders-loading" class="hidden px-6 py-16 text-center text-text-muted text-sm">
                            <div class="inline-block w-5 h-5 border-2 border-accent border-t-transparent rounded-full animate-spin mb-3"></div>
                            <div>åŠ è½½ä¸­...</div>
                        </div>
                    </div>
                </div>

                <!-- è®¢å•è§†å›¾ -->
                <div id="view-orders" class="hidden space-y-5">
                    <!-- æ—¶é—´ç­›é€‰ -->
                    <div class="glass-light rounded-2xl p-5 fade-in">
                        <div class="flex items-end gap-4">
                            <div>
                                <label class="text-xs text-text-muted block mb-2">å¼€å§‹æ—¶é—´</label>
                                <input type="datetime-local" id="order-start" class="bg-ios-elevated border-none rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all">
                            </div>
                            <div>
                                <label class="text-xs text-text-muted block mb-2">ç»“æŸæ—¶é—´</label>
                                <input type="datetime-local" id="order-end" class="bg-ios-elevated border-none rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all">
                            </div>
                            <button onclick="loadOrders()" class="px-6 py-2.5 btn-ios rounded-xl text-sm font-medium text-white">
                                æŸ¥è¯¢
                            </button>
                        </div>
                    </div>

                    <!-- è®¢å•è¡¨æ ¼ -->
                    <div class="glass-light rounded-2xl overflow-hidden fade-in">
                        <div class="px-6 py-4 border-b ios-separator flex items-center justify-between">
                            <h3 class="text-xs text-text-muted uppercase tracking-wide">å†å²è®¢å•</h3>
                            <!-- åˆ†é¡µæ§ä»¶ -->
                            <div id="orders-pagination" class="hidden flex items-center gap-2">
                                <button onclick="ordersPrevPage()" id="orders-prev-btn" class="px-3 py-1.5 bg-ios-elevated hover:bg-ios-surface rounded-lg text-xs font-medium disabled:opacity-40 disabled:cursor-not-allowed transition-all" disabled>
                                    ä¸Šä¸€é¡µ
                                </button>
                                <span id="orders-page-info" class="text-xs text-text-muted px-2">ç¬¬ 1 é¡µ</span>
                                <button onclick="ordersNextPage()" id="orders-next-btn" class="px-3 py-1.5 bg-ios-elevated hover:bg-ios-surface rounded-lg text-xs font-medium disabled:opacity-40 disabled:cursor-not-allowed transition-all" disabled>
                                    ä¸‹ä¸€é¡µ
                                </button>
                            </div>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="text-xs text-text-muted">
                                    <tr class="border-b ios-separator">
                                        <th class="text-left px-6 py-3.5 font-medium">æ—¶é—´</th>
                                        <th class="text-left px-6 py-3.5 font-medium">åˆçº¦</th>
                                        <th class="text-left px-6 py-3.5 font-medium">æ–¹å‘</th>
                                        <th class="text-left px-6 py-3.5 font-medium">ç±»å‹</th>
                                        <th class="text-right px-6 py-3.5 font-medium">æ•°é‡</th>
                                        <th class="text-right px-6 py-3.5 font-medium">æˆäº¤å‡ä»·</th>
                                        <th class="text-right px-6 py-3.5 font-medium">ç›ˆäº</th>
                                        <th class="text-right px-6 py-3.5 font-medium">æ‰‹ç»­è´¹</th>
                                        <th class="text-left px-6 py-3.5 font-medium">çŠ¶æ€</th>
                                    </tr>
                                </thead>
                                <tbody id="orders-table" class="divide-y divide-ios-separator">
                                    <!-- åŠ¨æ€ç”Ÿæˆ -->
                                </tbody>
                            </table>
                        </div>
                        <div id="no-orders" class="hidden px-6 py-16 text-center text-text-muted text-sm">
                            <div class="text-5xl mb-4 opacity-40">ğŸ“‹</div>
                            <div class="text-base mb-1">æš‚æ— è®¢å•è®°å½•</div>
                            <div class="text-xs text-text-muted/60">é€‰æ‹©æ—¶é—´èŒƒå›´æŸ¥è¯¢å†å²è®¢å•</div>
                        </div>
                        <div id="orders-loading" class="hidden px-6 py-16 text-center text-text-muted text-sm">
                            <div class="inline-block w-5 h-5 border-2 border-accent border-t-transparent rounded-full animate-spin mb-3"></div>
                            <div>åŠ è½½ä¸­...</div>
                        </div>
                    </div>
                </div>

                <!-- è´¦å•è§†å›¾ -->
                <div id="view-bills" class="hidden space-y-5">
                    <!-- ç­›é€‰æ¡ä»¶ -->
                    <div class="glass-light rounded-2xl p-5 fade-in">
                        <div class="flex items-end gap-4 flex-wrap">
                            <div>
                                <label class="text-xs text-text-muted block mb-2">è´¦å•ç±»å‹</label>
                                <select id="bill-type" class="bg-ios-elevated border-none rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all min-w-[120px]">
                                    <option value="">å…¨éƒ¨</option>
                                    <option value="2">äº¤æ˜“</option>
                                    <option value="8">èµ„é‡‘è´¹</option>
                                    <option value="1">åˆ’è½¬</option>
                                    <option value="5">å¼ºå¹³</option>
                                    <option value="4">å¼ºå‡</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-xs text-text-muted block mb-2">å¼€å§‹æ—¶é—´</label>
                                <input type="datetime-local" id="bill-start" class="bg-ios-elevated border-none rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all">
                            </div>
                            <div>
                                <label class="text-xs text-text-muted block mb-2">ç»“æŸæ—¶é—´</label>
                                <input type="datetime-local" id="bill-end" class="bg-ios-elevated border-none rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all">
                            </div>
                            <button onclick="loadBills()" class="px-6 py-2.5 btn-ios rounded-xl text-sm font-medium text-white">
                                æŸ¥è¯¢
                            </button>
                        </div>
                    </div>

                    <!-- è´¦å•è¡¨æ ¼ -->
                    <div class="glass-light rounded-2xl overflow-hidden fade-in">
                        <div class="px-6 py-4 border-b ios-separator flex items-center justify-between">
                            <div class="flex items-center gap-4">
                                <h3 class="text-xs text-text-muted uppercase tracking-wide">è´¦å•æµæ°´</h3>
                                <span id="bill-summary" class="text-xs text-text-muted"></span>
                            </div>
                            <!-- åˆ†é¡µæ§ä»¶ -->
                            <div id="bills-pagination" class="hidden flex items-center gap-2">
                                <button onclick="billsPrevPage()" id="bills-prev-btn" class="px-3 py-1.5 bg-ios-elevated hover:bg-ios-surface rounded-lg text-xs font-medium disabled:opacity-40 disabled:cursor-not-allowed transition-all" disabled>
                                    ä¸Šä¸€é¡µ
                                </button>
                                <span id="bills-page-info" class="text-xs text-text-muted px-2">ç¬¬ 1 é¡µ</span>
                                <button onclick="billsNextPage()" id="bills-next-btn" class="px-3 py-1.5 bg-ios-elevated hover:bg-ios-surface rounded-lg text-xs font-medium disabled:opacity-40 disabled:cursor-not-allowed transition-all" disabled>
                                    ä¸‹ä¸€é¡µ
                                </button>
                            </div>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="text-xs text-text-muted">
                                    <tr class="border-b ios-separator">
                                        <th class="text-left px-6 py-3.5 font-medium">æ—¶é—´</th>
                                        <th class="text-left px-6 py-3.5 font-medium">ç±»å‹</th>
                                        <th class="text-left px-6 py-3.5 font-medium">å­ç±»å‹</th>
                                        <th class="text-center px-6 py-3.5 font-medium">T/M</th>
                                        <th class="text-left px-6 py-3.5 font-medium">åˆçº¦</th>
                                        <th class="text-right px-6 py-3.5 font-medium">æ”¶ç›Š/æ”¯å‡º</th>
                                        <th class="text-right px-6 py-3.5 font-medium">æ‰‹ç»­è´¹</th>
                                        <th class="text-right px-6 py-3.5 font-medium">ä½™é¢å˜åŠ¨</th>
                                        <th class="text-right px-6 py-3.5 font-medium">è´¦æˆ·ä½™é¢</th>
                                    </tr>
                                </thead>
                                <tbody id="bills-table" class="divide-y divide-ios-separator">
                                    <!-- åŠ¨æ€ç”Ÿæˆ -->
                                </tbody>
                            </table>
                        </div>
                        <div id="no-bills" class="hidden px-6 py-16 text-center text-text-muted text-sm">
                            <div class="text-5xl mb-4 opacity-40">ğŸ“‘</div>
                            <div class="text-base mb-1">æš‚æ— è´¦å•è®°å½•</div>
                            <div class="text-xs text-text-muted/60">é€‰æ‹©æ—¶é—´èŒƒå›´æŸ¥è¯¢è´¦å•æµæ°´</div>
                        </div>
                        <div id="bills-loading" class="hidden px-6 py-16 text-center text-text-muted text-sm">
                            <div class="inline-block w-5 h-5 border-2 border-accent border-t-transparent rounded-full animate-spin mb-3"></div>
                            <div>åŠ è½½ä¸­...</div>
                        </div>
                    </div>
                </div>

                <!-- å†å²ä»“ä½è§†å›¾ -->
                <div id="view-position-history" class="hidden space-y-5">
                    <!-- ç­›é€‰æ¡ä»¶ -->
                    <div class="glass-light rounded-2xl p-5 fade-in">
                        <div class="flex items-end gap-4 flex-wrap">
                            <div>
                                <label class="text-xs text-text-muted block mb-2">å¼€å§‹æ—¶é—´</label>
                                <input type="datetime-local" id="pos-history-start" class="bg-ios-elevated border-none rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all">
                            </div>
                            <div>
                                <label class="text-xs text-text-muted block mb-2">ç»“æŸæ—¶é—´</label>
                                <input type="datetime-local" id="pos-history-end" class="bg-ios-elevated border-none rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all">
                            </div>
                            <div>
                                <label class="text-xs text-text-muted block mb-2">åˆçº¦</label>
                                <input type="text" id="pos-history-inst" placeholder="å¦‚ BTC-USDT-SWAP" class="bg-ios-elevated border-none rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all w-48">
                            </div>
                            <div>
                                <label class="text-xs text-text-muted block mb-2">æ–¹å‘</label>
                                <select id="pos-history-side" class="bg-ios-elevated border-none rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all min-w-[100px]">
                                    <option value="">å…¨éƒ¨</option>
                                    <option value="long">å¤š</option>
                                    <option value="short">ç©º</option>
                                </select>
                            </div>
                            <button onclick="loadPositionHistory()" class="px-6 py-2.5 btn-ios rounded-xl text-sm font-medium text-white">
                                æŸ¥è¯¢
                            </button>
                        </div>
                    </div>

                    <!-- ä»“ä½å¡ç‰‡å®¹å™¨ -->
                    <div class="glass-light rounded-2xl overflow-hidden fade-in">
                        <div class="px-6 py-4 border-b ios-separator flex items-center justify-between">
                            <h3 class="text-xs text-text-muted uppercase tracking-wide">å†å²ä»“ä½</h3>
                            <!-- åˆ†é¡µæ§ä»¶ -->
                            <div id="pos-history-pagination" class="hidden flex items-center gap-2">
                                <button onclick="posHistoryPrevPage()" id="pos-history-prev-btn" class="px-3 py-1.5 bg-ios-elevated hover:bg-ios-surface rounded-lg text-xs font-medium disabled:opacity-40 disabled:cursor-not-allowed transition-all" disabled>
                                    ä¸Šä¸€é¡µ
                                </button>
                                <span id="pos-history-page-info" class="text-xs text-text-muted px-2">ç¬¬ 1 é¡µ</span>
                                <button onclick="posHistoryNextPage()" id="pos-history-next-btn" class="px-3 py-1.5 bg-ios-elevated hover:bg-ios-surface rounded-lg text-xs font-medium disabled:opacity-40 disabled:cursor-not-allowed transition-all" disabled>
                                    ä¸‹ä¸€é¡µ
                                </button>
                            </div>
                        </div>
                        <div id="pos-history-container" class="p-4 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
                            <!-- åŠ¨æ€ç”Ÿæˆå¡ç‰‡ -->
                        </div>
                        <div id="no-pos-history" class="hidden px-6 py-16 text-center text-text-muted text-sm">
                            <div class="text-5xl mb-4 opacity-40">ğŸ“œ</div>
                            <div class="text-base mb-1">æš‚æ— å†å²ä»“ä½</div>
                            <div class="text-xs text-text-muted/60">é€‰æ‹©æ—¶é—´èŒƒå›´æŸ¥è¯¢å·²å¹³ä»“è®°å½•</div>
                        </div>
                        <div id="pos-history-loading" class="hidden px-6 py-16 text-center text-text-muted text-sm">
                            <div class="inline-block w-5 h-5 border-2 border-accent border-t-transparent rounded-full animate-spin mb-3"></div>
                            <div>åŠ è½½ä¸­...</div>
                        </div>
                    </div>
                </div>

                <!-- èµ„äº§æ›²çº¿è§†å›¾ -->
                <div id="view-equity-curve" class="hidden space-y-5">
                    <!-- ç­›é€‰æ¡ä»¶ -->
                    <div class="glass-light rounded-2xl p-5 fade-in">
                        <div class="flex items-end gap-4 flex-wrap">
                            <div>
                                <label class="text-xs text-text-muted block mb-2">æ—¶é—´èŒƒå›´</label>
                                <select id="equity-days" class="bg-ios-elevated border-none rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all min-w-[120px]">
                                    <option value="7">æœ€è¿‘ 7 å¤©</option>
                                    <option value="14">æœ€è¿‘ 14 å¤©</option>
                                    <option value="30" selected>æœ€è¿‘ 30 å¤©</option>
                                    <option value="60">æœ€è¿‘ 60 å¤©</option>
                                    <option value="90">æœ€è¿‘ 90 å¤©</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-xs text-text-muted block mb-2">æ•°æ®ç²’åº¦</label>
                                <select id="equity-interval" class="bg-ios-elevated border-none rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all min-w-[120px]">
                                    <option value="raw">åŸå§‹æ•°æ®</option>
                                    <option value="hourly">æŒ‰å°æ—¶</option>
                                    <option value="daily">æŒ‰å¤©</option>
                                </select>
                            </div>
                            <button onclick="loadEquityCurve()" class="px-6 py-2.5 btn-ios rounded-xl text-sm font-medium text-white">
                                æŸ¥è¯¢
                            </button>
                        </div>
                    </div>

                    <!-- æ±‡æ€»å¡ç‰‡ -->
                    <div class="grid grid-cols-4 gap-4">
                        <div class="glass-light rounded-2xl p-5 fade-in hover:bg-glass-hover transition-all">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-lg">ğŸ“…</span>
                                <span class="text-xs text-text-muted">èµ·å§‹ä½™é¢</span>
                            </div>
                            <div id="equity-start" class="text-xl font-mono font-semibold">--</div>
                        </div>
                        <div class="glass-light rounded-2xl p-5 fade-in hover:bg-glass-hover transition-all">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-lg">ğŸ’°</span>
                                <span class="text-xs text-text-muted">æœ€æ–°ä½™é¢</span>
                            </div>
                            <div id="equity-end" class="text-xl font-mono font-semibold">--</div>
                        </div>
                        <div class="glass-light rounded-2xl p-5 fade-in hover:bg-glass-hover transition-all">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-lg" id="equity-change-icon">ğŸ“Š</span>
                                <span class="text-xs text-text-muted">ç›ˆäº</span>
                            </div>
                            <div id="equity-change" class="text-xl font-mono font-semibold">--</div>
                        </div>
                        <div class="glass-light rounded-2xl p-5 fade-in hover:bg-glass-hover transition-all">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-lg">ğŸ“</span>
                                <span class="text-xs text-text-muted">æ•°æ®ç‚¹</span>
                            </div>
                            <div id="equity-points" class="text-xl font-mono font-semibold text-text-secondary">--</div>
                        </div>
                    </div>

                    <!-- å›¾è¡¨ -->
                    <div class="glass-light rounded-2xl p-6 fade-in">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-xs text-text-muted uppercase tracking-wide">èµ„äº§æ›²çº¿ (USDT)</h3>
                        </div>
                        <div class="relative" style="height: 400px;">
                            <canvas id="equity-chart"></canvas>
                        </div>
                        <div id="no-equity-data" class="hidden absolute inset-0 flex items-center justify-center text-text-muted text-sm">
                            <div class="text-center">
                                <div class="text-5xl mb-4 opacity-40">ğŸ“ˆ</div>
                                <div class="text-base mb-1">æš‚æ— æ•°æ®</div>
                                <div class="text-xs text-text-muted/60">é€‰æ‹©è´¦æˆ·å’Œæ—¶é—´èŒƒå›´æŸ¥è¯¢èµ„äº§æ›²çº¿</div>
                            </div>
                        </div>
                        <div id="equity-loading" class="hidden absolute inset-0 flex items-center justify-center">
                            <div class="text-center text-text-muted text-sm">
                                <div class="inline-block w-5 h-5 border-2 border-accent border-t-transparent rounded-full animate-spin mb-3"></div>
                                <div>åŠ è½½ä¸­...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- è¯¦æƒ…å¼¹çª— -->
    <div id="detail-modal-overlay" class="modal-overlay" onclick="closeDetailModal()"></div>
    <div id="detail-modal" class="modal-container">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="detail-modal-title" class="text-base font-semibold text-text-primary">Detail</h3>
                <button class="modal-close" onclick="closeDetailModal()">
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                        <path d="M1 1L11 11M1 11L11 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <div id="detail-modal-body" class="modal-body">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
